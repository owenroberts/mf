!function(){"use strict";const{Game:t,Sprite:e,TextButton:n,TextSprite:a}=LinesEngine,o=new t({dps:20,width:960,height:720,retina:!0,debug:!0,stats:!0,suspend:!1,scenes:["main","cat","dog","tv","start"],lineWidth:1,events:["mouse"]});let s,c,i,r,d,l,m,u,p;o.load({sprites:"public/sprites.json"});let w=!1;function g(t,e){if(console.log("change scene",t,e),"cat"===t){const t=e?"cat":Cool.choice(["cat","dog"]);o.scenes.current=t,"cat"===t&&(l.animation.state=e?Cool.randomInt(5,10):Cool.randomInt(0,4)),"dog"===t&&(m.animation.state=Cool.randomInt(0,4))}if("dog"===t){const t=e?"dog":Cool.choice(["cat","dog"]);o.scenes.current=t,"cat"===t&&(l.animation.state=Cool.randomInt(0,4)),"dog"===t&&(m.animation.state=e?Cool.randomInt(5,10):Cool.randomInt(0,4))}"tv"===t&&(o.scenes.current="tv",u.animation.state=Cool.randomInt(0,u.animation.endFrame)),"main"===t&&(o.scenes.current="main",s.state=Cool.randomInt(0,s.animation.endFrame),c.state=Cool.randomInt(0,s.animation.endFrame),i.state=Cool.randomInt(0,s.animation.endFrame))}o.start=function(){const{sprites:t}=o.anims,f=new n({x:100,y:100,msg:"Click to start with sound",wrap:20,letters:t.cat_letters,track:20,countForward:!0,countBackward:!0});o.scenes.start.addUI(f),f.onClick=function(){o.scenes.current="main",w=!0,p.start()};const h=new n({x:100,y:200,msg:"Click to start without sound",wrap:25,letters:t.cat_letters,track:20,countForward:!0,countBackward:!0});o.scenes.start.addUI(h),h.onClick=function(){o.scenes.current="main",w=!1,p.start()};const C=new e;C.addAnimation(t.tv_frame),o.scenes.addToDisplay(C,["start","main","cat","dog","tv"]),s=new e(500,-20),s.addAnimation(t.cat_main),o.scenes.main.addToDisplay(s),c=new e(-20,100),c.addAnimation(t.dog_main),o.scenes.main.addToDisplay(c),i=new e(260,265),i.addAnimation(t.tv_main),o.scenes.main.addToDisplay(i),l=new e(650,320),l.center=!0,l.addAnimation(t.cat_close),o.scenes.cat.addToDisplay(l),r=new a({x:100,y:100,letters:t.cat_letters,wrap:12,track:20,lead:60,countForward:!0,countBackward:!0,endDelay:20}),d=new a({x:500,y:200,letters:t.dog_letters,wrap:12,track:20,lead:60,countForward:!0,countBackward:!0,endDelay:20}),m=new e(250,350),m.center=!0,m.addAnimation(t.dog_close),o.scenes.dog.addToDisplay(m),u=new e(o.halfWidth,o.halfHeight),u.center=!0,u.addAnimation(t.tv_close),o.scenes.tv.addToDisplay(u),[s,c,i,l,m,u].forEach((t=>{for(let e=0;e<=t.animation.endFrame;e++)t.animation.createNewState(""+e,e,e);t.animation.state=Cool.randomInt(0,t.animation.endFrame)})),p=function(t,e,n){const a=[];let o,s,c,i=0,r=2,d=!1,l={cat:t,dog:e};!function(){Cool.choice(["cat","dog"]);const[t,e]=Cool.shuffle(["cat","dog"]);o=l[t],a.push({speaker:t,text:"I'm hungry.",delay:Cool.randomInt(2,4)}),a.push({speaker:e,text:"Me too.",delay:Cool.randomInt(2,4)}),a.push({speaker:t,text:"When will we eat again?",delay:Cool.randomInt(2,4)}),a.push({speaker:e,text:"I don't know.",delay:Cool.randomInt(2,5)}),a.push({speaker:t,text:"Should we watch some tv?",delay:Cool.randomInt(2,5)})}();let m=new CFGGenerator;return async function(){const t=await fetch("./text_tools/data/FEAR_AND_TREMBLING-cfg.json").then((t=>t.json()));m.feed("cat",t),m.feed("dog",t),console.log(m),console.log(m.getText("cat","S",{S:[["I","VB","a","NN"]]}))}(),{update:function(t){if(i<=r)return i+=t/1e3;if(!s&&0===a.length)return d=!1,!0;if(!s){const t=a.shift();c=t.delay,s=t.speaker,o=l[t.speaker],o.isActive=!0,o.setMsg(t.text),n(s,!0)}const e=o.display();if(!e)return!1;e&&(r=c,i=0,o.isActive=!1,n(Cool.random(["cat","dog","tv","main"]),!1),s=void 0)},isActive:()=>d,start(){d=!0}}}(r,d,g),o.scenes.current="start",console.log("lines",o)},o.update=function(t){},o.draw=function(t){if(o.scenes.current.display(),p.isActive()){!0===p.update(t)&&(g("tv"),console.log("start three"))}},o.mouseDown=function(t,e){o.scenes.current.mouseDown(t,e)},o.mouseUp=function(t,e){o.scenes.current.mouseUp(t,e)},o.mouseMoved=function(t,e){o.scenes.current.mouseMoved(t,e)}}();
//# sourceMappingURL=src_maps/tv.min.js.map
